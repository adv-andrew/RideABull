<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ride Details - Ride A Bull</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        #map {
            height: 400px;
            width: 100%;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <nav class="nav">
        <a href="rides.html" class="nav-logo">Ride A Bull</a>
    </nav>

    <div class="container">
        <div style="max-width: 800px; margin: 2rem auto;">
            <a href="rides.html" style="color: var(--primary-color); text-decoration: none; display: inline-block; margin-bottom: 1rem;">
                ‚Üê Back to Rides
            </a>

            <div class="card" style="margin-bottom: 2rem;">
                <h1>San Francisco ‚Üí Los Angeles</h1>
                <div class="ride-meta" style="margin: 1rem 0;">
                    <span>üöó John D.</span>
                    <span>üïí Today, 2:30 PM</span>
                    <span>üí∫ 3 seats left</span>
                    <span>üí∞ $25/seat</span>
                </div>
                <div class="eco-stats" style="margin-bottom: 1rem;">
                    üå± This ride will save 25 lbs of CO‚ÇÇ
                </div>
            </div>

            <div class="card" style="margin-bottom: 2rem;">
                <h2>Route Map</h2>
                <div id="map"></div>
            </div>

            <div class="card" style="margin-bottom: 2rem;">
                <h2>Ride Details</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h3>Driver</h3>
                        <p>John D.</p>
                        <p>‚≠ê 4.9 (120 rides)</p>
                    </div>
                    <div>
                        <h3>Vehicle</h3>
                        <p>Tesla Model 3</p>
                        <p>üéµ Music Allowed</p>
                        <p>üö´ No Smoking</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Pickup & Dropoff</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h3>Pickup</h3>
                        <p>üìç San Francisco State University</p>
                        <p>1600 Holloway Ave, San Francisco, CA 94132</p>
                    </div>
                    <div>
                        <h3>Dropoff</h3>
                        <p>üìç University of Southern California</p>
                        <p>University Park, Los Angeles, CA 90089</p>
                    </div>
                </div>
            </div>

            <div style="position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 1rem; box-shadow: 0 -2px 10px rgba(0,0,0,0.1);">
                <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0;">$25 per seat</h3>
                        <p style="margin: 0; color: #666;">3 seats available</p>
                    </div>
                    <a href="rides.html" class="btn">Request to Join</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Google Maps JavaScript API Script -->
    <script>
        // Pickup and dropoff locations
        const pickupLocation = {
            address: "San Francisco State University, 1600 Holloway Ave, San Francisco, CA 94132",
            lat: 37.7241,
            lng: -122.4799
        };

        const dropoffLocation = {
            address: "University of Southern California, University Park, Los Angeles, CA 90089",
            lat: 34.0224,
            lng: -118.2851
        };

        // Initialize the map and directions
        function initMap() {
            // Create a map centered at the midpoint between pickup and dropoff
            const midpointLat = (pickupLocation.lat + dropoffLocation.lat) / 2;
            const midpointLng = (pickupLocation.lng + dropoffLocation.lng) / 2;

            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 6,
                center: { lat: midpointLat, lng: midpointLng },
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            // Create a DirectionsService object to use the Directions API
            const directionsService = new google.maps.DirectionsService();

            // Create a DirectionsRenderer object to display the route
            const directionsRenderer = new google.maps.DirectionsRenderer({
                map: map,
                suppressMarkers: false
            });

            // Define the route request
            const request = {
                origin: { lat: pickupLocation.lat, lng: pickupLocation.lng },
                destination: { lat: dropoffLocation.lat, lng: dropoffLocation.lng },
                travelMode: google.maps.TravelMode.DRIVING
            };

            // Get the route from the DirectionsService
            directionsService.route(request, function(result, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    // Display the route on the map
                    directionsRenderer.setDirections(result);

                    // Get route details
                    const route = result.routes[0];
                    const leg = route.legs[0];

                    // Update ride information with actual distance and duration
                    document.getElementById('route-distance').textContent = leg.distance.text;
                    document.getElementById('route-duration').textContent = leg.duration.text;
                } else {
                    console.error('Directions request failed due to ' + status);
                    // Fallback if directions request fails
                    alert('Could not display directions due to: ' + status);
                }
            });
        }
    </script>

    <!-- Add this div to display route information -->
    <script>
        // Add route information to the page
        document.addEventListener('DOMContentLoaded', function() {
            const rideMetaDiv = document.querySelector('.ride-meta');
            if (rideMetaDiv) {
                // Add distance and duration placeholders
                const distanceSpan = document.createElement('span');
                distanceSpan.innerHTML = 'üõ£Ô∏è <span id="route-distance">Calculating...</span>';

                const durationSpan = document.createElement('span');
                durationSpan.innerHTML = '‚è±Ô∏è <span id="route-duration">Calculating...</span>';

                rideMetaDiv.appendChild(distanceSpan);
                rideMetaDiv.appendChild(durationSpan);
            }
        });
    </script>

    <!-- Load the Google Maps JavaScript API with your API key -->
    <script async defer
        src="API KEY">
    </script>
</body>
</html>